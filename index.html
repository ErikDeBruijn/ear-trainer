<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ear Trainer MVP</title>
    <link rel="stylesheet" href="css/styles.css" />

    <!-- Libraries -->
    <script src="https://unpkg.com/tone@latest/build/Tone.js"></script>
    <script src="https://unpkg.com/webmidi@latest/dist/iife/webmidi.iife.js"></script>
    <script src="https://unpkg.com/canvas-confetti@latest/dist/confetti.browser.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>
<body>
<div class="container">
    <header>
        <div class="title">Ear Trainer â€” v0.1</div>
        <div class="settings-section">
            <button id="settings-toggle" class="settings-toggle">
                <span class="settings-toggle-text">Settings</span>
                <span class="settings-toggle-icon">â–¼</span>
            </button>
            <div id="settings-panel" class="settings-panel">
                <div class="controls">
                    <label>Key
                        <select id="key-select">
                            <option value="C-major">C major</option>
                            <option value="G-major">G major</option>
                            <option value="D-major">D major</option>
                            <option value="F#-major">F# major</option>
                            <option value="A-minor">A minor</option>
                            <option value="E-minor">E minor</option>
                            <option value="F#-minor">F# minor</option>
                        </select>
                    </label>
                    <label>Range
                        <select id="range-select">
                          <optgroup label="Single octave">
                            <option value="C3-C4">C3â€“C4 (1 octave)</option>
                            <option value="C4-C5">C4â€“C5 (1 octave)</option>
                            <option value="C5-C6">C5â€“C6 (1 octave)</option>
                          </optgroup>
                          <optgroup label="Two octaves">
                            <option value="C2-C4">C2â€“C4 (2 octaves)</option>
                            <option value="C3-C5" selected>C3â€“C5 (2 octaves)</option>
                            <option value="C4-C6">C4â€“C6 (2 octaves)</option>
                          </optgroup>
                        </select>
                    </label>
                    <label>MIDI Inputs
                        <div class="midi-input-selector">
                            <div class="midi-input-header" id="midi-input-header">
                                <span id="midi-input-summary">No devices selected</span>
                                <span class="dropdown-arrow">â–¼</span>
                            </div>
                            <div class="midi-input-dropdown" id="midi-input-dropdown">
                                <div class="midi-input-list" id="midi-input-list">
                                    <!-- Checkboxes will be populated here -->
                                </div>
                            </div>
                        </div>
                    </label>
                    <label>MIDI Outputs
                        <div class="midi-output-selector">
                            <div class="midi-output-header" id="midi-output-header">
                                <span id="midi-output-summary">No devices selected</span>
                                <span class="dropdown-arrow">â–¼</span>
                            </div>
                            <div class="midi-output-dropdown" id="midi-output-dropdown">
                                <div class="midi-output-list" id="midi-output-list">
                                    <!-- Checkboxes will be populated here -->
                                </div>
                            </div>
                        </div>
                    </label>
                    <label>Audible response
                        <select id="audible-response">
                            <option value="correct-only" selected>Correct answer only</option>
                            <option value="always">Always</option>
                        </select>
                    </label>
                    <label>Play home note first
                        <select id="home-note-frequency">
                            <option value="always" selected>Always</option>
                            <option value="every-2">Every other note</option>
                            <option value="every-3">Every third note</option>
                            <option value="every-4">Every fourth note</option>
                            <option value="first-only">Only the first note</option>
                            <option value="never">Never</option>
                        </select>
                    </label>
                    <label>Notes to practice
                        <select id="practice-target">
                            <option value="10" selected>10 notes</option>
                            <option value="20">20 notes</option>
                            <option value="30">30 notes</option>
                            <option value="50">50 notes</option>
                            <option value="100">100 notes</option>
                        </select>
                    </label>
                    <label>ðŸ”Š Volume
                        <input type="range" id="volume-slider" min="0" max="100" value="70" />
                    </label>
                </div>
            </div>
        </div>
        <div class="game-controls">
            <button id="start-pause" class="primary">â–¶</button>
            <button id="replay" class="secondary">ðŸŽµ</button>
        </div>
    </header>

    <section class="panel">
        <!-- on-screen keyboard -->
        <div class="piano-container">
            <div class="keys" id="piano-keys">
                <!-- C3 to B4 range (24 keys) -->
                <div class="key" data-note="48">C3</div>
                <div class="key sharp" data-note="49">C#3</div>
                <div class="key" data-note="50">D3</div>
                <div class="key sharp" data-note="51">D#3</div>
                <div class="key" data-note="52">E3</div>
                <div class="key" data-note="53">F3</div>
                <div class="key sharp" data-note="54">F#3</div>
                <div class="key" data-note="55">G3</div>
                <div class="key sharp" data-note="56">G#3</div>
                <div class="key" data-note="57">A3</div>
                <div class="key sharp" data-note="58">A#3</div>
                <div class="key" data-note="59">B3</div>
                <div class="key" data-note="60">C4</div>
                <div class="key sharp" data-note="61">C#4</div>
                <div class="key" data-note="62">D4</div>
                <div class="key sharp" data-note="63">D#4</div>
                <div class="key" data-note="64">E4</div>
                <div class="key" data-note="65">F4</div>
                <div class="key sharp" data-note="66">F#4</div>
                <div class="key" data-note="67">G4</div>
                <div class="key sharp" data-note="68">G#4</div>
                <div class="key" data-note="69">A4</div>
                <div class="key sharp" data-note="70">A#4</div>
                <div class="key" data-note="71">B4</div>
            </div>
        </div>

        <!-- HUD -->
        <div class="hud">
            <div>Score: <span id="score">0</span></div>
            <div>Streak: <span id="streak">0</span></div>
            <div>Practice time today: <span id="timer">0:00</span></div>
            <div>Accuracy: <span id="acc">â€”</span></div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-label">Practice Progress <span id="progress-text"></span></div>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
        </div>
        <div id="status" class="status"></div>
    </section>
</div>
<div id="overlay-flash" aria-hidden="true"></div>

<!-- App -->
<script src="js/piano.js"></script>
<script type="module" src="js/main.js"></script>
</body>
</html>
